import{u as Z,f as d,j as ee,k as te,h as ae,F as se,r as v,o as n,c as r,a as o,b as t,w as l,l as b,e as k,t as y,i as p,n as _}from"./index-72c80999.js";const le={class:"grid"},oe={class:"col-12"},ie={class:"my-2"},de={class:"flex flex-column md:flex-row md:justify-between md:align-items-center"},ne=o("h5",{class:"m-0"},"Manage drivers",-1),re={class:"block mt-2 md:mt-0 p-input-icon-left"},ue=o("i",{class:"pi pi-search"},null,-1),ce={key:0},me={key:1},ve={class:"m-auto text-center"},pe={key:0,class:"pi pi-times-circle text-red-400 h-6"},_e={key:1,class:"pi pi-check-circle text-green-500"},fe={key:0},he={key:1},be={class:"field mb-5"},ye=o("label",{for:"first"},"first name ",-1),ge={key:0,class:"p-invalid"},ke={class:"field mb-5"},we=o("label",{for:"last"},"last name ",-1),Ce={key:0,class:"p-invalid"},Ve={class:"field mb-5"},xe=o("label",{for:"email",class:"mb-3"},"email ",-1),Se={key:0,class:"p-invalid"},Te={class:"field mb-5"},Ne=o("label",{for:"password",class:"mb-3"},"password ",-1),Ue={key:0,class:"p-invalid"},Me={class:"field mb-5"},De=o("label",{for:"mobile",class:"mb-3"},"mobile",-1),qe={key:0,class:"p-invalid"},$e={class:"m-auto"},Le={key:0,class:"mt-4 m-auto text-red-500"},Pe={class:"flex align-items-center justify-content-center"},Oe=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),Re={key:0},je={__name:"index",setup(Be){const P=Z();d(null);const w=ee(),q=d(null),C=d(!0),a=d({}),U=d(""),O=d(null),M=d({tourist_rating:Number,reviewable_id:"",type:0}),V=d(!1),x=d(!1);d(!1);const S=d(!1),R=d({}),T=d(null),$=d(null),N=d({}),u=d(!1);d([{label:"INSTOCK",value:"instock"},{label:"LOWSTOCK",value:"lowstock"},{label:"OUTOFSTOCK",value:"outofstock"}]),te(()=>{W()});const h=()=>{b.post("https://api.dataforseo.com/v3/dataforseo_labs/google/ranked_keywords/live",{data:{target:"dataforseo.com",date_from:"2020-01-01",date_to:"2021-01-01"}}).then(i=>{C.value=!1,console.log(i.data.tasks[0].result[0].metrics.organic)})},B=i=>{C.value=!0,b.post(`/api/drivers/${i.id}/active`).then(s=>{h()})},F=i=>{C.value=!0,b.post(`/api/drivers/${i.id}/inActive`).then(s=>{h()})},j=i=>{C.value=!0,b.post(`/api/drivers/${i.id}/changeStatus`).then(s=>{h()})},A=()=>{b.post("/api/rating/create-admin",M.value).then(i=>{h(),w.add({severity:"success",summary:"Successful",detail:"rate send",life:3e3}),x.value=!x.value}).catch(i=>{U.value=i.response.data.errors})};ae(()=>{h()});const E=i=>{P.push({name:"drivers-show",params:{id:i}}),console.log(i)},I=()=>{V.value=!1,u.value=!1},K=()=>{u.value=!0,!(!a.value.first_name||!a.value.last_name||!a.value.email||!a.value.mobile_number)&&(a.value.id?(b.post(`/api/users/${a.value.id}/update`,a.value).then(i=>{console.log(i.data),h(),w.add({severity:"success",summary:"Successful",detail:"user updated",life:3e3})}).catch(()=>{}),w.add({severity:"success",summary:"Successful",detail:"Product Updated",life:3e3})):b.post("/api/users/create",a.value).then(i=>{console.log(i.data),h(),w.add({severity:"success",summary:"Successful",detail:"user Created",life:3e3})}).catch(()=>{}),V.value=!1,a.value={})};d("bottom"),d([{value:1},{value:2},{value:3},{value:4},{value:5}]);const Y=()=>{$.value.exportCSV()},z=()=>{q.value=q.value.filter(i=>!T.value.includes(i)),S.value=!1,T.value=null,w.add({severity:"success",summary:"Successful",detail:"Products Deleted",life:3e3})},W=()=>{N.value={global:{value:null,matchMode:se.CONTAINS}}};return(i,s)=>{const c=v("Button"),G=v("Toolbar"),H=v("Toast"),g=v("InputText"),m=v("Column"),J=v("DataTable"),D=v("Dialog"),Q=v("Rating"),X=v("va-card");return n(),r("div",le,[o("div",oe,[t(X,{class:"card"},{default:l(()=>[t(G,{class:"mb-4"},{start:l(()=>[o("div",ie,[t(c,{label:"New",icon:"pi pi-plus",class:"new mr-2"})])]),end:l(()=>[t(c,{label:"Export",icon:"pi pi-upload",class:"new",onClick:s[0]||(s[0]=e=>Y())})]),_:1}),t(H),t(J,{ref_key:"dt",ref:$,selection:T.value,"onUpdate:selection":s[2]||(s[2]=e=>T.value=e),value:O.value,loading:C.value,"data-key":"id",paginator:!0,rows:10,filters:N.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25],"current-page-report-template":"Showing {first} to {last} of {totalRecords} products","responsive-layout":"scroll"},{header:l(()=>[o("div",de,[ne,o("span",re,[ue,t(g,{modelValue:N.value.global.value,"onUpdate:modelValue":s[1]||(s[1]=e=>N.value.global.value=e),placeholder:"Search..."},null,8,["modelValue"])])])]),default:l(()=>[t(m,{"selection-mode":"multiple","header-style":"width: 3rem"}),t(m,{field:"name",header:"User",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:l(e=>[k(y(e.data.name),1)]),_:1}),t(m,{field:"gender",header:"Roles",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:l(e=>[e.data.gender==1?(n(),r("span",ce," Men ")):(n(),r("span",me," Women "))]),_:1}),t(m,{field:"email",header:"User Type",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:l(e=>[k(y(e.data.email),1)]),_:1}),t(m,{field:"phone",header:"Projects",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:l(e=>[k(y(e.data.phone),1)]),_:1}),t(m,{field:"phone",header:"Manger",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:l(e=>[k(y(e.data.phone),1)]),_:1}),t(m,{field:"phone",header:"Registered On",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:l(e=>[k(y(e.data.phone),1)]),_:1}),t(m,{field:"phone",header:"Last visit",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:l(e=>[k(y(e.data.phone),1)]),_:1}),t(m,{field:"email_verified",header:"Email Verified",sortable:!0,"header-style":"width:14%; min-width:10rem;",class:"m-auto"},{body:l(e=>{var f,L;return[o("div",ve,[((f=e.data)==null?void 0:f.email_verified)=="Not Yet"?(n(),r("i",pe)):p("",!0),((L=e.data)==null?void 0:L.email_verified)!="Not Yet"?(n(),r("i",_e)):p("",!0)])]}),_:1}),t(m,{"header-style":"min-width:10rem;"},{body:l(e=>[e.data.status==-1?(n(),r("div",fe,[t(c,{icon:"pi pi-times",class:_(["p-button-rounded mr-2","p-button-danger"]),onClick:f=>F(e.data)},null,8,["onClick"]),t(c,{icon:"pi pi-check",class:_(["p-button-rounded mr-2","p-button-success"]),onClick:f=>B(e.data)},null,8,["onClick"])])):(n(),r("div",he,[t(c,{icon:e.data.status==0?"pi pi-check":"pi pi-times",class:_(["new mr-2",e.data.status==0?"p-button-success":"p-button-danger"]),style:{"border-radius":"50% !important"},onClick:f=>j(e.data)},null,8,["icon","class","onClick"])]))]),_:1}),t(m,{"header-style":"min-width:10rem;"},{body:l(e=>[o("div",null,[t(c,{label:"show",class:_(["pop mr-2","p-button-danger"]),onClick:f=>E(e.data.id)},null,8,["onClick"])])]),_:1})]),_:1},8,["selection","value","loading","filters"]),t(D,{visible:V.value,"onUpdate:visible":s[8]||(s[8]=e=>V.value=e),style:{width:"450px"},header:"users form",modal:!0,class:"p-fluid"},{footer:l(()=>[t(c,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:I}),t(c,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:K})]),default:l(()=>[o("div",be,[ye,t(g,{class:_(["mt-3",{"p-invalid":u.value&&!a.value.first_name}]),id:"first",modelValue:a.value.first_name,"onUpdate:modelValue":s[3]||(s[3]=e=>a.value.first_name=e),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue","class"]),u.value&&!a.value.first_name?(n(),r("small",ge,"First Name is required.")):p("",!0)]),o("div",ke,[we,t(g,{class:_(["mt-3",{"p-invalid":u.value&&!a.value.last_name}]),id:"last",modelValue:a.value.last_name,"onUpdate:modelValue":s[4]||(s[4]=e=>a.value.last_name=e),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue","class"]),u.value&&!a.value.last_name?(n(),r("small",Ce,"Last Name is required.")):p("",!0)]),o("div",Ve,[xe,t(g,{class:_(["mt-3",{"p-invalid":u.value&&!a.value.email}]),id:"email",modelValue:a.value.email,"onUpdate:modelValue":s[5]||(s[5]=e=>a.value.email=e),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue","class"]),u.value&&!a.value.email?(n(),r("small",Se,"Email is required.")):p("",!0)]),o("div",Te,[Ne,t(g,{class:_(["mt-3",{"p-invalid":u.value&&!a.value.password}]),id:"password",modelValue:a.value.password,"onUpdate:modelValue":s[6]||(s[6]=e=>a.value.password=e),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue","class"]),u.value&&!a.value.password?(n(),r("small",Ue,"password is required.")):p("",!0)]),o("div",Me,[De,t(g,{class:_(["mt-3",{"p-invalid":u.value&&!a.value.mobile_number}]),id:"mobile",modelValue:a.value.mobile_number,"onUpdate:modelValue":s[7]||(s[7]=e=>a.value.mobile_number=e),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue","class"]),u.value&&!a.value.mobile_number?(n(),r("small",qe,"mobile is required.")):p("",!0)])]),_:1},8,["visible"]),t(D,{visible:x.value,"onUpdate:visible":s[10]||(s[10]=e=>x.value=e),style:{width:"450px"},header:"rate",modal:!0},{footer:l(()=>[t(c,{label:"send",icon:"pi pi-check",class:"m-auto",onClick:A})]),default:l(()=>{var e;return[o("div",$e,[t(Q,{class:"m-auto",modelValue:M.value.tourist_rating,"onUpdate:modelValue":s[9]||(s[9]=f=>M.value.tourist_rating=f),stars:5,cancel:!1},null,8,["modelValue"])]),(e=U.value)!=null&&e.tourist_rating?(n(),r("div",Le,y(U.value.tourist_rating[0]),1)):p("",!0)]}),_:1},8,["visible"]),t(D,{visible:S.value,"onUpdate:visible":s[12]||(s[12]=e=>S.value=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:l(()=>[t(c,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:s[11]||(s[11]=e=>S.value=!1)}),t(c,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:z})]),default:l(()=>[o("div",Pe,[Oe,R.value?(n(),r("span",Re,"Are you sure you want to delete the selected products?")):p("",!0)])]),_:1},8,["visible"])]),_:1})])])}}};export{je as default};
